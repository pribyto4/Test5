SELECT SelectAuctionWithAuctionLocalizedWithBidWithAspNetUsers.AuctionId,SelectAuctionWithAuctionLocalizedWithBidWithAspNetUsers.Name,SUM(SelectAuctionWithAuctionLocalizedWithBidWithAspNetUsers.Amount) AS Total FROM (SELECT SelectAuctionWithAuctionLocalizedWithBid.UserId,SelectAuctionWithAuctionLocalizedWithBid.AuctionId,SelectAuctionWithAuctionLocalizedWithBid.Name,MAX(SelectAuctionWithAuctionLocalizedWithBid.Amount) AS Amount FROM (SELECT Bid.UserId,SelectAuctionWithAuctionLocalized.AuctionId,SelectAuctionWithAuctionLocalized.Name,Bid.Amount FROM (SELECT AuctionId,SelectAuctionLocalized.Name FROM (SELECT * FROM AuctionLocalized WHERE LanguageId=1) SelectAuctionLocalized INNER JOIN Auction ON SelectAuctionLocalized.AuctionId=Auction.Id) SelectAuctionWithAuctionLocalized INNER JOIN Bid ON SelectAuctionWithAuctionLocalized.AuctionId=Bid.AuctionId) SelectAuctionWithAuctionLocalizedWithBid INNER JOIN AspNetUsers ON SelectAuctionWithAuctionLocalizedWithBid.UserId=AspNetUsers.Id GROUP BY SelectAuctionWithAuctionLocalizedWithBid.UserId,SelectAuctionWithAuctionLocalizedWithBid.AuctionId,SelectAuctionWithAuctionLocalizedWithBid.Name) SelectAuctionWithAuctionLocalizedWithBidWithAspNetUsers GROUP BY SelectAuctionWithAuctionLocalizedWithBidWithAspNetUsers.AuctionId,SelectAuctionWithAuctionLocalizedWithBidWithAspNetUsers.Name
GO
